<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLM Chess Arena</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}" />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
        // Use 'class' strategy for dark mode
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <script>
        // On page load, apply theme from local storage to avoid FOUC (Light/Dark only)
        (function() {
            try {
                const saved = localStorage.getItem('theme') || 'light';
                document.documentElement.classList.toggle('dark', saved === 'dark');
            } catch (e) {}
        })();
    </script>
    <style>
        /* Ensure chess pieces keep their intended colors in dark mode */
        .dark .piece-black { color: #111; }
        .dark .piece-white { color: #fff; text-shadow: 0 0 1px #000; }
    </style>
    {% block head %}{% endblock %}
</head>
<body class="bg-gray-100 dark:bg-zinc-950 text-gray-900 dark:text-gray-100 font-sans">
    <header class="sticky top-0 z-40 w-full backdrop-blur-sm bg-gradient-to-r from-white/85 to-indigo-50/70 dark:from-zinc-900/85 dark:to-zinc-900/85 border-b border-gray-200/70 dark:border-zinc-800/70">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex items-center justify-center h-16">
          <div class="flex items-center gap-16 sm:gap-24 lg:gap-32">
            <div class="flex items-center gap-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" class="h-7 w-7" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="14.5 17.5 3 6 3 3 6 3 17.5 14.5" fill="#2fc742"/>
                <line x1="13" x2="19" y1="19" y2="13" fill="#2fc742"/>
                <line x1="16" x2="20" y1="16" y2="20" fill="#2fc742"/>
                <line x1="19" x2="21" y1="21" y2="19" fill="#2fc742"/>
                <polyline points="14.5 6.5 18 3 21 3 21 6 17.5 9.5" fill="#2fc742"/>
                <line x1="5" x2="9" y1="14" y2="18" fill="#2fc742"/>
                <line x1="7" x2="4" y1="17" y2="20" fill="#2fc742"/>
                <line x1="3" x2="5" y1="19" y2="21" fill="#2fc742"/>
              </svg>
              <span class="font-bold text-lg sm:text-xl tracking-tight">LLM Chess Arena</span>
              <span class="hidden sm:inline-flex items-center rounded-full bg-green-100/70 dark:bg-green-900/40 px-2 py-0.5 text-[10px] font-medium text-green-700 dark:text-green-300 border border-green-200/70 dark:border-green-800/60">Preview</span>
            </div>

            <nav class="hidden md:flex items-center gap-1 rounded-full bg-white/60 dark:bg-zinc-800/60 border border-gray-200/70 dark:border-zinc-700/60 px-1.5 py-1 shadow-sm">
              <button data-page="battle" class="nav-link px-3 py-1.5 rounded-full text-base font-medium transition-colors text-green-600 dark:text-green-400 hover:bg-green-600 hover:text-white">Battle</button>
              <button data-page="leaderboard" class="nav-link px-3 py-1.5 rounded-full text-base font-medium transition-colors text-gray-600 dark:text-gray-300 hover:bg-green-600 hover:text-white">Leaderboard</button>
            </nav>

            <button id="theme-toggle" type="button" class="flex items-center gap-2 px-3 py-1.5 rounded-full text-sm border border-gray-200/70 dark:border-zinc-700/60 bg-white/60 dark:bg-zinc-800/60 text-gray-600 dark:text-gray-300 hover:bg-green-50/80 dark:hover:bg-zinc-700/60 shadow-sm">
              <i id="icon-light" data-lucide="sun" class="w-4 h-4"></i>
              <i id="icon-dark" data-lucide="moon" class="w-4 h-4 hidden"></i>
              <span class="hidden sm:inline" id="theme-label">Light</span>
            </button>
          </div>
        </div>
      </div>
    </header>
    
    <main class="pb-16 md:pb-0">
        {% block content %}{% endblock %}
    </main>

    <nav class="md:hidden fixed bottom-0 left-0 right-0 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-sm border-t border-gray-200 dark:border-zinc-800 p-2">
      <div class="flex justify-around">
         <button data-page="battle" class="mobile-nav-link flex flex-col items-center gap-1 p-2 rounded-lg w-full text-indigo-500"> <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg> <span class="text-xs font-medium">Battle</span> </button>
         <button data-page="leaderboard" class="mobile-nav-link flex flex-col items-center gap-1 p-2 rounded-lg w-full text-gray-500 dark:text-gray-400"> <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg> <span class="text-xs font-medium">Leaderboard</span> </button>
      </div>
    </nav>
    {% block scripts %}
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (window.lucide && window.lucide.createIcons) {
                window.lucide.createIcons();
            }
            const toggleBtn = document.getElementById('theme-toggle');
            const iconLight = document.getElementById('icon-light');
            const iconDark = document.getElementById('icon-dark');
            const label = document.getElementById('theme-label');

            function applyTheme(mode) {
                document.documentElement.classList.toggle('dark', mode === 'dark');
                iconLight.classList.toggle('hidden', mode !== 'light');
                iconDark.classList.toggle('hidden', mode !== 'dark');
                if (label) label.textContent = mode.charAt(0).toUpperCase() + mode.slice(1);
            }

            function initTheme() {
                const stored = localStorage.getItem('theme') || 'light';
                applyTheme(stored);
            }

            initTheme();

            toggleBtn.addEventListener('click', () => {
                const current = localStorage.getItem('theme') || 'light';
                const next = current === 'light' ? 'dark' : 'light';
                localStorage.setItem('theme', next);
                applyTheme(next);
            });
        });
    </script>
    {% endblock %}
</body>
</html>
