{% extends "base.html" %}

{% block head %}
    <script>
        const PIECE_UNICODE = {
            'p': '♟︎', 'r': '♜', 'n': '♞', 'b': '♝', 'q': '♛', 'k': '♚',
            'P': '♙', 'R': '♖', 'N': '♘', 'B': '♗', 'Q': '♕', 'K': '♔',
        };

        function showPage(page) {
            if (page === 'battle') {
                document.getElementById('battle-page').style.display = 'block';
                document.getElementById('leaderboard-page').style.display = 'none';
                document.querySelector('[data-page="battle"]').classList.add('text-indigo-500');
                document.querySelector('[data-page="leaderboard"]').classList.remove('text-indigo-500');
            } else {
                document.getElementById('battle-page').style.display = 'none';
                document.getElementById('leaderboard-page').style.display = 'block';
                document.querySelector('[data-page="battle"]').classList.remove('text-indigo-500');
                document.querySelector('[data-page="leaderboard"]').classList.add('text-indigo-500');
            }
        }
    </script>
{% endblock %}

{% block content %}
<div id="battle-page">
    {% include 'battle.html' %}
</div>
<div id="leaderboard-page" style="display: none;">
    {% include 'leaderboard.html' %}
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/battle.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.nav-link, .mobile-nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(e.currentTarget.dataset.page);
            });
        });
    });
</script>
{% endblock %}
